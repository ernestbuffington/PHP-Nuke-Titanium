"use strict";function iterationChange(e){var n=e.ownerDocument,t=n.getElementById("rmAfterLoadSpan"),i=n.getElementById("rmAfterLoadInput");"0"===e.value?(t.style.color="lightgrey",i.disabled=!0):(t.style.color="black",i.disabled=!1)}function animSelectionChange(e){var n,t=CKEDITOR.plugins.cssanim.ckEditor.lang.cssanim,i=e.parentElement.parentElement,a=i.parentNode.parentNode.parentNode.getElementsByClassName("cssAnimButton"),l=e.ownerDocument,s=l.getElementById("rmAfterLoadSpan"),o=l.getElementById("rmAfterLoadInput"),d=l.getElementsByName("anim_L").item(0),r=l.getElementsByName("anim_C").item(0),c=l.getElementsByName("anim_O").item(0);if("anim_L"===e.name&&"none"===d.value){if("cssAnimPause"===r.value)return alert(t.pbOnClickPause),void(d.selectedIndex=selectList_cache);if("cssAnimPause"===c.value)return alert(t.pbOnOverPause),void(d.selectedIndex=selectList_cache)}if("anim_C"===e.name&&"none"===d.value&&"cssAnimPause"===r.value)return alert(t.pbOnClickOnLoadNone),void(r.selectedIndex=selectList_cache);if("anim_O"===e.name&&"none"===d.value&&"cssAnimPause"===c.value)return alert(t.pbOnOverOnLoadNone),void(c.selectedIndex=selectList_cache);if("cssAnimPause"===e.value||"none"===e.value){for(n=1;n<i.childElementCount;n+=1)i.childNodes[n].style.opacity=0;a[0].style.display="none","anim_L"===e.name&&(s.style.color="lightgrey",o.disabled=!0)}else{for(n=1;n<i.childElementCount;n+=1)i.childNodes[n].style.opacity="initial";a[0].style.display="initial","anim_L"===e.name&&(s.style.color="black",o.disabled=!1)}}var selectList_cache;CKEDITOR.dialog.add("cssanimAddAnimDialog",function(e){function n(e,n,t){var i,a,l="";l+='<select  onclick="selectList_cache=this.selectedIndex" onChange="animSelectionChange(this);" name="anim'+n+'">',i="","none"===t&&(i="selected"),l+='<option value="none" '+i+">"+s.none+"</option>","_L"!==n&&(i="","cssAnimPause"===t&&(i="selected"),l+='<option value="cssAnimPause" '+i+">"+s.cssAnimPause+"</option>");var o,d;for(o in e){for(d=e[o],l+='<optgroup label="'+o+'" style="font-weight:bold">',a=0;a<d.length;a+=1)i="",d[a]===t&&(i="selected"),l+='<option value="'+d[a]+'" '+i+">"+d[a]+"</option>";l+="  </optgroup>"}return l+="</select>"}function t(e,t,i,a){var l,o,d="",r='checked = "checked"',c=0,m="normal",g=1,p=1,u="none",h="linear",y=["linear","ease","ease-in","ease-out","ease-in-out"],b=["normal","alternate"],x=null,v="",f="black";for(a&&(a.indexOf("animation-play-state")>=0?x={name:"cssAnimPause",duration:null,timingFunction:"linear",delay:0,iterationCount:1,direction:"normal"}:(o=a.replace("{animation:","").replace("}","").replace(";","").trim(),x=parseCSS3AnimationShorthand(o)),c=x.delay/1e3,m=x.direction,g=x.duration/1e3,p=x.iterationCount,"infinite"===p&&(p=0,i=!1),u=x.name,h=x.timingFunction),d+='<table style="display:block; overflow-y=scroll;  overflow-y: auto; width:550px;">',d+="<tr>",d+='<th style="text-align: center;font-weight: bold;border: 1px solid grey;padding: 2px; width:100px;">',d+=s.name,d+="</th>",d+='<th style="text-align: center;font-weight: bold;border: 1px solid grey;padding: 2px; width:60px;">',d+=s.duration,d+="</th>",d+='<th style="text-align: center;font-weight: bold;border: 1px solid grey;padding: 2px; width:100px;">',d+=s.tFunc,d+="</th>",d+='<th style="text-align: center;font-weight: bold;border: 1px solid grey;padding: 2px; width:60px;">',d+=s.delay,d+="</th>",d+='<th title="If set to 0, iteration will be set as \'infinite\'" style="text-align: center;font-weight: bold;border: 1px solid grey;padding: 2px; width:70px;">',d+=s.iter,d+="</th>",d+='<th style="text-align: center;font-weight: bold;border: 1px solid grey;padding: 2px;">',d+=s.direction,d+="</th>",d+="</tr>",d+="<tr>",d+='<td style="text-align: center;padding: 3px;border: 1px solid gainsboro;">',d+=n(e,t,u),d+="</td>",d+='<td style="text-align: center;padding: 3px;border: 1px solid gainsboro;">',d+='<input name="duration'+t+'" type="number" min="1" max="600" value="'+g+'" style="width:4em; border:1px solid gainsboro;">sec',d+="</td>",d+='<td style="text-align: center;padding: 3px;border: 1px solid gainsboro;">',d+='<select name="timing'+t+'" style="border:1px solid gainsboro;">',l=0;l<y.length;l+=1)v="",y[l]===h&&(v="selected"),d+='<option value="'+y[l]+'" '+v+">"+y[l]+"</option>";for(d+="</select>",d+="</td>",d+='<td style="text-align: center;padding: 3px;border: 1px solid gainsboro;">',d+='<input name="delay'+t+'" type="number" min="0" max="600" value="'+c+'" style="width:4em; border:1px solid gainsboro;">sec',d+="</td>",d+='<td title="If set to 0, iteration will be set as \'infinite\'" style="text-align: center;padding: 3px;border: 1px solid gainsboro;">',d+='<input name="iteration'+t+'" type="number" min="0" max="99" value="'+p+'" style="width:3em; border:1px solid gainsboro" onChange="iterationChange(this);">',d+="</td>",d+='<td style="text-align: center;padding: 3px;border: 1px solid gainsboro;">',d+='<select name="direction'+t+'" style="border:1px solid gainsboro;">',l=0;l<b.length;l+=1)v="",b[l]===m&&(v="selected"),d+='<option value="'+b[l]+'" '+v+">"+b[l]+"</option>";return d+="</select>",d+="</td>",d+="</tr>",f="black",null!==i&&(i===!1&&(r=""),0===p&&(r="disabled",f="lightgrey"),d+="<tr>",d+='<td colspan="3" style="text-align: center;padding: 3px; border-left: 1px solid gainsboro; border-bottom: 1px solid gainsboro;">',d+='<span id="rmAfterLoadSpan" style="color:'+f+'" title="'+s.ralTitle+'">'+s.ral+"</span>",d+="</td>",d+='<td colspan="3" style="text-align: left; padding: 3px;  border-right: 1px solid gainsboro; border-bottom: 1px solid gainsboro;">',d+='<input  id="rmAfterLoadInput" type="checkbox" name="rmAfterLoad"  '+r+">",d+="</td>",d+="</tr>"),d+="</table>"}function i(e,n){var t;for(t=0;t<e.$.length;t++)if(e.$[t].name==n)return new CKEDITOR.dom.node(e.$[t]);return null}function a(e,n){var i,a=null;a=e.getAttribute("data-animation"),a&&(i=decodeURIComponent(a),a=JSON.parse(i),CKEDITOR.plugins.cssanim.managePending&&(l[l.length]=[e.getId(),i]));var r,c,m="",g="OnLoad",p="OnOver",u="OnClick";m+='<div class="tabs" style="width:600px;">',m+='<div class="tab">',m+='<span style="font-weight:bold; font-size: larger;">'+p+"</span>",m+='<div id="cssanimAddAnimDialogTabOver" class="content" style="height:55px;">',r=a&&a.cdo?a.cdo:null,m+=t(n,"_O",null,r),m+='<div style="text-align: center; padding: 2px;">',m+='<input type="button" class="cssAnimButton" value="'+s.testIt+' !" name="overBtn" onclick="CKEDITOR.plugins.cssanim.cssanimAddAnimDialogTest(this);">',m+="</div> ",m+="</div> ",m+='<div class="tab">',m+='<span style="font-weight:bold;font-size: larger;">'+u+"</span>",m+='<div  id="cssanimAddAnimDialogTabClick" class="content" style="height:55px;">',r=a&&a.cdc?a.cdc:null,m+=t(n,"_C",null,r),m+='<div style="text-align: center; padding: 2px;">',m+='<input type="button" class="cssAnimButton" value="'+s.testIt+' !" name="clickBtn" onclick="CKEDITOR.plugins.cssanim.cssanimAddAnimDialogTest(this);">',m+="</div> ",m+="</div> ",m+='<div class="tab">',m+='<span style="font-weight:bold;font-size: larger;">'+g+"</span>",m+='<div  id="cssanimAddAnimDialogTabLoad" class="content" style="height:85px;">',r=a&&a.cds?a.cds:null,c=a?a.ral:!0,m+=t(n,"_L",c,r),m+='<div style="text-align: center; padding: 2px;">',m+='<input type="button" class="cssAnimButton" value="'+s.testIt+' !" name="loadBtn" onclick="CKEDITOR.plugins.cssanim.cssanimAddAnimDialogTest(this);">',m+="</div> ",m+="</div> ",m+="</div>";var h='<link rel="stylesheet" href="./ckeditor/plugins/cssanim/css/cssanim.css"><style type="text/css">.cke_cssanim_container{color:#000 !important;padding:10px 10px 0;margin-top:5px;text-align: center;}.cke_cssanim_container p{margin: 0 0 10px;}</style><div class="cke_cssanim_container"><div class="cke_cssanim_container_div" style="text-align: center; border: 1px solid grey; width:50%;margin-left: auto;margin-right: auto;"><img class="cke_cssanim_container_img" src="'+o+'" alt="CSS Animation" style="border: 1px solid grey; padding: 5px; margin: 10px;"></div><br><br><p id="elemName" style="font-weight:bold;font-size: larger;text-align: -webkit-center;">Animation '+s.forStr+" : "+d.getName()+"</p><br>"+m+"</div>";return h}var l,s=e.lang.cssanim,o=CKEDITOR.getUrl(CKEDITOR.plugins.get("cssanim").path+"dialogs/css3animation.png"),d=null;return{title:s.editAnimsTitle,width:600,minWidth:600,height:400,minHeight:400,resizable:CKEDITOR.DIALOG_RESIZE_NONE,contents:[{id:"mainPanel",label:"CSS_Animation",title:"Animation",padding:0,elements:[{type:"html",id:"htmlAnim",html:"",setup:function(){var n=document.getElementById(this.domId),t=e.config.allowedAnimations;CKEDITOR.plugins.cssanim.runHighLightElem(d),n.innerHTML=a(d,t),CKEDITOR.plugins.cssanim.cssanimAddAnimDialog=n},cancel:function(){CKEDITOR.plugins.cssanim.cleanHighlight()},commit:function(){CKEDITOR.plugins.cssanim.cleanHighlight();var e,n=this.getElement().getElementsByTag("input"),t=this.getElement().getElementsByTag("select"),a={};a.animStart=null,a.animClick=null,a.animOver=null,a.ral=!1,e=i(t,"anim_L").getValue();var l;"none"!==e&&(a.animStart=e+" ",a.animStart+=i(n,"duration_L").getValue()+"s ",a.animStart+=i(t,"timing_L").getValue()+" ",a.animStart+=i(n,"delay_L").getValue()+"s ",l=i(n,"iteration_L").getValue(),"0"===l&&(l="infinite"),a.animStart+=l+" ",a.animStart+=i(t,"direction_L").getValue(),i(n,"rmAfterLoad").$.checked&&"infinite"!==l&&(a.ral=!0)),e=i(t,"anim_C").getValue(),"none"!==e&&(a.animClick=e+" ",a.animClick+=i(n,"duration_C").getValue()+"s ",a.animClick+=i(t,"timing_C").getValue()+" ",a.animClick+=i(n,"delay_C").getValue()+"s ",l=i(n,"iteration_C").getValue(),"0"===l&&(l="infinite"),a.animClick+=l+" ",a.animClick+=i(t,"direction_C").getValue()),e=i(t,"anim_O").getValue(),"none"!==e&&(a.animOver=e+" ",a.animOver+=i(n,"duration_O").getValue()+"s ",a.animOver+=i(t,"timing_O").getValue()+" ",a.animOver+=i(n,"delay_O").getValue()+"s ",l=i(n,"iteration_O").getValue(),"0"===l&&(l="infinite"),a.animOver+=l+" ",a.animOver+=i(t,"direction_O").getValue()),CKEDITOR.plugins.cssanim.runAddAnimElem(d,a)}}]}],onShow:function(){d=CKEDITOR.plugins.cssanim.curSelectedElement,CKEDITOR.plugins.cssanim.managePending&&(l=CKEDITOR.plugins.cssanim.pendingChanges),this.setupContent();var e,n=this.getContentElement("mainPanel","htmlAnim"),t=n.getInputElement(),a=t.getElementsByTag("select");e=i(a,"anim_L"),animSelectionChange(e.$),e=i(a,"anim_C"),animSelectionChange(e.$),e=i(a,"anim_O"),animSelectionChange(e.$)},onOk:function(){this.commitContent(),CKEDITOR.plugins.cssanim.managePending&&(CKEDITOR.plugins.cssanim.pendingChanges=l,CKEDITOR.plugins.cssanim.refreshCssAnimDialogAnimationsTab())},onCancel:function(){this.foreach(function(e){e.cancel&&e.cancel.apply(e)})}}});
